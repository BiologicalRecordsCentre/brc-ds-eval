<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://d3js.org/d3.v5.min.js"></script>

<!-- <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet"> -->

<script src="./dist/brc-ds-eval.umd.js"></script>
<link rel="stylesheet" type="text/css" href="./dist/brc-ds-eval.umd.css">

<style>

</style>
</head>
<body>
<h2>BRC dataset evaluation and comparison tool</h2>
<p>
    If you haven't used this tool before, start on the '<i>Help</i>' tab.
</p>
<div id="tabbar">
    <button class="tablink" onclick="brcdseval.openPage('help', this)" id="defaultOpen">Help</button>
    <button class="tablink" onclick="brcdseval.openPage('load', this)">Load</button>
    <button class="tablink" onclick="brcdseval.openPage('summary', this)">Summary</button>
    <button class="tablink" onclick="brcdseval.openPage('maps', this)">Maps</button>
</div>


<div id="help" class="tabcontent">
  <h3>Introduction</h3>
  <p>
    TODO - outline aims and intentions.
  </p>
  <h3>Data preparation</h3>
  <p>
    TODO - describe the minimum requirements of datasets that can be used
    with this tool etc.
  </p> 
  <h3>TODO</h3>
  <h4>Summary tab</h4>
  <ul>
    <li>ID difficulty</li>
  </ul>
</div>

<div id="load" class="tabcontent">
  <h3>Packaged resources</h3>
  <p>
    These resources are packaged with the tool, you can carry on specifying your local CSV datasets whilst these are downloading.
  </p>
  <p>
    JNCC taxon designations (2020): <span id="jnccLoading">downloading...</span>
  </p>

  <h3>Local resource - dataset 1</h3>
  <label for="csvFile">Browse for dataset 1 CSV</label>
  <input type="file" id="csvFile1" name="csvFile1" accept=".csv" onChange="brcdseval.fileOpened(event, 1)">
  <div id="csvLoading1">No file loaded</div>
  <div id="field-selects-1">
    <div class="field-input">
      <label for="taxon1">Taxon:</label>
      <select id="taxon1"></select>
    </div>
    <div class="field-input">
      <label for="tvk1">TVK:</label>
      <select id="tvk1"></select>
    </div>
    <div class="field-input">
      <label for="gr1">Grid ref:</label>
      <select id="gr1"></select>
    </div>
    <div class="field-input">
      <label for="date1">Date:</label>
      <select id="date1"></select>
    </div>
    <div class="field-input">
      <label for="recorder1">Recorder:</label>
      <select id="recorder1"></select>
    </div>
    <div class="field-input">
      <label for="verifier1">Verifier:</label>
      <select id="verifier1"></select>
    </div>
    <div class="field-input">
      <label for="verifyStatus1">Verified status:</label>
      <select id="verifyStatus1"></select>
    </div>
    <div class="field-input">
      <label for="source1">Source:</label>
      <select id="source1"></select>
    </div>
  </div>
  <div class='config-buttons'>
    <button id="setFieldConfig1" onClick="brcdseval.setFieldConfig(1)">Set config</button>
    <button id="clearFieldConfig1" onClick="brcdseval.clearFieldConfig(1)">Clear config</button>
  </div>
  <div id="configStatus1">No config set</div>

  <h3>Local resource - dataset 2</h3>
  <label for="csvFile">Browse for dataset 2 CSV</label>
  <input type="file" id="csvFile2" name="csvFile2" accept=".csv" onChange="brcdseval.fileOpened(event, 2)">
  <div id="csvLoading2">No file loaded</div>
  <div id="field-selects-2">
    <div class="field-input">
      <label for="taxon2">Taxon:</label>
      <select id="taxon2"></select>
    </div>
    <div class="field-input">
      <label for="tvk2">TVK:</label>
      <select id="tvk2"></select>
    </div>
    <div class="field-input">
      <label for="gr2">Grid ref:</label>
      <select id="gr2"></select>
    </div>
    <div class="field-input">
      <label for="date2">Date:</label>
      <select id="date2"></select>
    </div>
    <div class="field-input">
      <label for="recorder2">Recorder:</label>
      <select id="recorder2"></select>
    </div>
    <div class="field-input">
      <label for="verifier2">Verifier:</label>
      <select id="verifier2"></select>
    </div>
    <div class="field-input">
      <label for="verifyStatus2">Verified status:</label>
      <select id="verifyStatus2"></select>
    </div>
    <div class="field-input">
      <label for="source2">Source:</label>
      <select id="source2"></select>
    </div>
  </div>
  <div class='config-buttons'>
    <button id="setFieldConfig2" onClick="brcdseval.setFieldConfig(2)">Set config</button>
    <button id="clearFieldConfig2" onClick="brcdseval.clearFieldConfig(2)">Clear config</button>
  </div>
  <div id="configStatus2">No config set</div>
</div>

<div id="summary" class="tabcontent">
  <p>
    <fieldset>
      <legend>Table display</legend>
      <input type="checkbox" id="summary-check-1" checked onclick="brcdseval.summaryDisplay()">
      <label>Dataset 1</label>
      <input type="checkbox" id="summary-check-2" onclick="brcdseval.summaryDisplay()">
      <label>Dataset 2</label>
    </fieldset>
  </p>
  
  <p>
    <fieldset>
      <legend>Group records by</legend>
      <input type="radio" id="rad-none" name="rad-grouping" value="" checked onclick="brcdseval.redoSummaries()">
      <label for="rad-none">None</label>
      <input type="radio" id="rad-recorder" name="rad-grouping" value="recorder" onclick="brcdseval.redoSummaries()">
      <label for="rad-recorder">Recorder</label>
      <input type="radio" id="rad-verifier" name="rad-grouping" value="verifier" onclick="brcdseval.redoSummaries()">
      <label for="rad-verifier">Verifier</label>
      <input type="radio" id="rad-verify-status" name="rad-grouping" value="verifyStatus" onclick="brcdseval.redoSummaries()">
      <label for="rad-verify-status">Verified status</label>
      <input type="radio" id="rad-source" name="rad-grouping" value="source" onclick="brcdseval.redoSummaries()">
      <label for="rad-verifier">Source</label>
    </fieldset>
  </p>

  <div>
    <div id="summary-div-1">
      <h4 id="summary-name-1"></h4>
      <p id="summary-message-1"></p>
      <div id="summary-table-1"></div>
    </div>
    <div id="summary-div-2">
      <h4 id="summary-name-2"></h4>
      <p id="summary-message-2"></p>
      <div id="summary-table-2"></div>
    </div>
  </div>
</div>

<div id="maps" class="tabcontent">
  <p>TODO: Summary and interactive maps</p>
</div>

<script>
  brcdseval.init();
</script>
   
</body>
</html> 
